<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/gimm/gulp-live-server"

    >gulp-live-server (v0.0.30)</a>
</h1>
<h4>easy light weight server with livereload</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.gulp-live-server">module gulp-live-server</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-live-server.gulp-live-server">
            function <span class="apidocSignatureSpan"></span>gulp-live-server
            <span class="apidocSignatureSpan">(args, options, livereload)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-live-server.new">
            function <span class="apidocSignatureSpan">gulp-live-server.</span>new
            <span class="apidocSignatureSpan">(script)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-live-server.notify">
            function <span class="apidocSignatureSpan">gulp-live-server.</span>notify
            <span class="apidocSignatureSpan">(event)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-live-server.start">
            function <span class="apidocSignatureSpan">gulp-live-server.</span>start
            <span class="apidocSignatureSpan">(execPath)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-live-server.static">
            function <span class="apidocSignatureSpan">gulp-live-server.</span>static
            <span class="apidocSignatureSpan">(folder, port)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-live-server.stop">
            function <span class="apidocSignatureSpan">gulp-live-server.</span>stop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">gulp-live-server.</span>script</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.gulp-live-server" id="apidoc.module.gulp-live-server">module gulp-live-server</a></h1>


    <h2>
        <a href="#apidoc.element.gulp-live-server.gulp-live-server" id="apidoc.element.gulp-live-server.gulp-live-server">
        function <span class="apidocSignatureSpan"></span>gulp-live-server
        <span class="apidocSignatureSpan">(args, options, livereload)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">gulp-live-server = function (args, options, livereload){
    var config = {}
    config.args = util.isArray(args) ? args : [args];
    //deal with options
    config.options = merge(defaults.options, options || {});
    //deal with livereload
    if (livereload) {
        config.livereload = (typeof livereload === &#x27;object&#x27; ? livereload : {port: livereload});
    }else{
        config.livereload = (livereload === false ? false : defaults.livereload);
    }
    // return exports with its state, the server and livereload instance
    // this allows multiple servers at once
    return merge({
      config: config,
      server: undefined, // the server child process
      lr: undefined // tiny-lr serverexports;
    }, exports);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gulp-live-server.new" id="apidoc.element.gulp-live-server.new">
        function <span class="apidocSignatureSpan">gulp-live-server.</span>new
        <span class="apidocSignatureSpan">(script)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">new = function (script) {
    if(!script){
        return console.log(error(&#x27;script file not specified.&#x27;));
    }
    var args = util.isArray(script) ? script : [script];
    return this(args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  });
    ```
- Serve with your own script file

  ```js
    gulp.task(&#x27;serve&#x27;, function() {
//1. run your script as a server
var server = gls.<span class="apidocCodeKeywordSpan">new</span>(&#x27;myapp.js&#x27;);
server.start();

//2. run script with cwd args, e.g. the harmony flag
var server = gls.new([&#x27;--harmony&#x27;, &#x27;myapp.js&#x27;]);
//this will achieve `node --harmony myapp.js`
//you can access cwd args in `myapp.js` via `process.argv`
server.start();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gulp-live-server.notify" id="apidoc.element.gulp-live-server.notify">
        function <span class="apidocSignatureSpan">gulp-live-server.</span>notify
        <span class="apidocSignatureSpan">(event)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">notify = function (event) {
	var lr = this.lr;
    if(event &#x26;&#x26; event.path){
        var filepath = path.relative(__dirname, event.path);
        debug(info(&#x27;file(s) changed: %s&#x27;), event.path);
        lr.changed({body: {files: [filepath]}});
    }

    return es.map(function(file, done) {
        var filepath = path.relative(__dirname, file.path);
        debug(info(&#x27;file(s) changed: %s&#x27;), filepath);
        lr.changed({body: {files: [filepath]}});
        done(null, file);
    }.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var deferred = Q.defer();
this.server = spawn(this.config.execPath, this.config.args, this.config.options);

//stdout and stderr will not be set if using the { stdio: &#x27;inherit&#x27; } options for spawn
if (this.server.stdout) {
    this.server.stdout.setEncoding(&#x27;utf8&#x27;);
    this.server.stdout.on(&#x27;data&#x27;, function(data) {
        deferred.<span class="apidocCodeKeywordSpan">notify</span>(data);
        callback.serverLog(data);
    });
}
if (this.server.stderr) {
    this.server.stderr.setEncoding(&#x27;utf8&#x27;);
    this.server.stderr.on(&#x27;data&#x27;, function (data) {
        deferred.notify(data);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gulp-live-server.start" id="apidoc.element.gulp-live-server.start">
        function <span class="apidocSignatureSpan">gulp-live-server.</span>start
        <span class="apidocSignatureSpan">(execPath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (execPath) {
    if (this.server) { // server already running
        debug(info(&#x27;kill server&#x27;));
        this.server.kill(&#x27;SIGKILL&#x27;);
        //server.removeListener(&#x27;exit&#x27;, callback.serverExit);
        this.server = undefined;
    } else {
        if(this.config.livereload){
            this.lr = tinylr(this.config.livereload);
            this.lr.listen(this.config.livereload.port, callback.lrServerReady.bind(this));
        }
    }

    // if a executable is specified use that to start the server (e.g. coffeescript)
    // otherwise use the currents process executable
    this.config.execPath =  execPath || this.config.execPath || process.execPath;
    var deferred = Q.defer();
    this.server = spawn(this.config.execPath, this.config.args, this.config.options);

    //stdout and stderr will not be set if using the { stdio: &#x27;inherit&#x27; } options for spawn
    if (this.server.stdout) {
        this.server.stdout.setEncoding(&#x27;utf8&#x27;);
        this.server.stdout.on(&#x27;data&#x27;, function(data) {
            deferred.notify(data);
            callback.serverLog(data);
        });
    }
    if (this.server.stderr) {
        this.server.stderr.setEncoding(&#x27;utf8&#x27;);
        this.server.stderr.on(&#x27;data&#x27;, function (data) {
            deferred.notify(data);
            callback.serverError(data);
        });
    }

    this.server.once(&#x27;exit&#x27;, function (code, sig) {
        setTimeout(function() { // yield event loop for stdout/stderr
          deferred.resolve({
              code: code,
              signal: sig
          });
          if (glsInstanceCounter == 0)
            callback.serverExit(code, sig);
        }, 0)
    });

    var exit = function(code, sig) {
      callback.processExit(code,sig,server);
    }
    process.listeners(&#x27;exit&#x27;) || process.once(&#x27;exit&#x27;, exit);

    glsInstanceCounter++;
    return deferred.promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  ```js
var gulp = require(&#x27;gulp&#x27;);
var gls = require(&#x27;gulp-live-server&#x27;);
gulp.task(&#x27;serve&#x27;, function() {
//1. serve with default settings
var server = gls.static(); //equals to gls.static(&#x27;public&#x27;, 3000);
server.<span class="apidocCodeKeywordSpan">start</span>();

//2. serve at custom port
var server = gls.static(&#x27;dist&#x27;, 8888);
server.start();

//3. serve multi folders
var server = gls.static([&#x27;dist&#x27;, &#x27;.tmp&#x27;]);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gulp-live-server.static" id="apidoc.element.gulp-live-server.static">
        function <span class="apidocSignatureSpan">gulp-live-server.</span>static
        <span class="apidocSignatureSpan">(folder, port)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">static = function (folder, port) {
    var script = this.script;
    folder = folder || process.cwd();
    util.isArray(folder) &#x26;&#x26; (folder = folder.join(&#x27;,&#x27;));
    port = port || 3000;
    return this([script, folder, port]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- Serve a static folder(`gls.script`&#x3c;&#x27;scripts/static.js&#x27;&#x3e; is used as server script)

  ```js
var gulp = require(&#x27;gulp&#x27;);
var gls = require(&#x27;gulp-live-server&#x27;);
gulp.task(&#x27;serve&#x27;, function() {
//1. serve with default settings
var server = gls.<span class="apidocCodeKeywordSpan">static</span>(); //equals to gls.static(&#x27;public&#x27;, 3000);
server.start();

//2. serve at custom port
var server = gls.static(&#x27;dist&#x27;, 8888);
server.start();

//3. serve multi folders
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gulp-live-server.stop" id="apidoc.element.gulp-live-server.stop">
        function <span class="apidocSignatureSpan">gulp-live-server.</span>stop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stop = function () {
    var deferred = Q.defer();
    if (this.server) {
        this.server.once(&#x27;exit&#x27;, function (code) {
            deferred.resolve(code);
        });

        debug(info(&#x27;kill server&#x27;));
        //use SIGHUP instead of SIGKILL, see issue #34
        this.server.kill(&#x27;SIGKILL&#x27;);
        //server.removeListener(&#x27;exit&#x27;, callback.serverExit);
        this.server = undefined;
    }else{
        deferred.resolve(0);
    }
    if(this.lr){
        debug(info(&#x27;close livereload server&#x27;));
        this.lr.close();
        //TODO how to stop tiny-lr from hanging the terminal
        this.lr = undefined;
    }

    return deferred.promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
before(&#x27;start server&#x27;, function (done) {
    server = gls.static();
    server.start().then(null, null, function(code){
        done();
    }).done();
});
after(&#x27;stop server&#x27;, function (done) {
    server.<span class="apidocCodeKeywordSpan">stop</span>().then(function () {
        done();
    }).done();
});

it(&#x27;should server listening&#x27;, function (done) {
    req.get(&#x27;/&#x27;).expect(404, done);
});
...</pre></li>
    </ul>




</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
